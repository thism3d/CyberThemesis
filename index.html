<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberthemis Home</title>
    <!-- <link rel="stylesheet" href="styles.css"> -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="shortcut icon" type="image/png" href="logo.ico">


    <!-- <script defer src="script.js"></script> -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
        }

        .container {
            max-width: 900px;
          
            background-color: null;
            padding: 20px;
			margin: 50px 50px 50px 200px; 
     
        }

        header {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid #ddd;
        }

        header h1 {
            margin: 0;
            font-size: 24px;
        }

        header .logo {
            width: 100px;
            display: block;
            margin: 0 auto 10px;
        }

        .circle {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            display: inline-block;
            margin: 0 5px;
        }

        .green { background-color: #4CAF50; }
        .blue { background-color: #2196F3; }
        .yellow { background-color: #FFC107; }

        .main-content {
            text-align: center;
            padding: 30px;
        }

        .main-content h2 {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .main-content p {
            color: black;
        }

        .chat-box {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        .chat-box input {
            width: 250px;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-right: 10px;
        }

        .chat-box select {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-right: 10px;
        }

        .chat-box button {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .chat-log {
            margin-top: 20px;
            padding: 15px;
            background-color: null;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            text-align: left;
        }

        .chat-log p {
            margin: 5px 0;
            padding: 5px;
			width:500px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    display: flex;
    height: 100vh;
    background-color: #f4f4f9;
}

/* Sidebar */
.sidebar {
    width: 250px;
    height: 100vh;
    background-color: #001f3f;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: width 0.3s;
}

.sidebar.collapsed {
    width: 60px;
}

.sidebar-header {
    padding: 20px;
    display: flex;
    align-items: center;
}

.logo {
    width: 50px;
    height: 30px;
	margin-left: -20px; 
}

.sidebar-title {
    margin-left: 10px;
    font-size: 20px;
    font-weight: bold;
    display: inline-block;
}

.toggle-btn {
    margin-left: auto;
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: blue;
    outline: none;
}

.sidebar-nav,
.sidebar-footer {
    list-style-type: none;
    padding: 10px;
}

.sidebar-nav li,
.sidebar-footer li {
    margin: 15px 0;
}

.sidebar-nav li a,
.sidebar-footer li a {
    color: white;
    text-decoration: none;
    display: flex;
    align-items: center;
    padding: 10px;
    transition: background 0.3s;
}

.sidebar-nav li a:hover,
.sidebar-footer li a:hover {
    background-color: #003366;
    border-radius: 5px;
}

/* Ensure icons align properly */
.sidebar ul li a i {
    width: 30px; /* Give some space for the icon */
    text-align: center;
}

/* Ensure text is properly spaced when visible */
.sidebar ul li a span {
    display: inline-block;
    margin-left: 10px;
}

/* Hide text when sidebar is collapsed */
.sidebar.collapsed ul li a span {
    display: none;
}

/* Collapsed Sidebar */
.sidebar.collapsed .sidebar-title {
    display: none;
}

/* Main Content */
.main-content {
    flex: 1;
    padding: 20px;
}

        .right-panel {
            position: absolute;
            right: 0;
            top: 0;
            width: 200px;
            height: 100%;
            background-color: #f7f7f7;
            border-left: 1px solid #ddd;
            padding-top: 20px;
        }

        .right-panel .section {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .right-panel .section h3 {
            margin: 0;
        }

        .right-panel .section a {
            color: black;
            text-decoration: none;
            display: block;
            margin-top: 5px;
        }

        .user-icon {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .user-icon img {
            width: 40px;
            border-radius: 50%;
        }
		

/* Styling for bot message container */
.bot-response-container {
    display: flex;
    align-items: center;
    margin-top: 10px;
    flex-wrap: wrap;
}

.bot-response-container-left, .bot-response-container-right{
    display: flex;
    align-items: center;
    margin-top: 0;
    width: 100%;

}

.bot-response-container-right{
    justify-content: left;
    align-items: flex-start;
}

/* Logo styling */
.bot-logo {
    width: 30px;
    height: 30px;
    margin-right: 10px;
}

/* Bot message styling */
.bot-message {
    background-color: #f0f0f0;
    border-radius: 5px;
    padding: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    max-width: 80%; /* Make sure the message container is wide enough */
    word-wrap: break-word; /* Allow long words to break and wrap */
    white-space: normal; /* Prevent single long lines */
    display: inline-block;
}
.source-container {
            margin-top: 10px;
            background-color: #e9f5ff;
            border-radius: 5px;
            padding: 10px;
            display: none; /* Initially hidden */
            padding-left: 20px;
        }

/* Update for the toggle-source-btn */
.toggle-source-btn {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 5px;
    border-radius: 5px;
    cursor: pointer;
    display: block;
    margin-top: 10px; /* Add some space between the response and the button */
    width: fit-content; /* Keeps the button size based on text */
    margin-left: 0px; /* Ensures it aligns with the response box */
}


.bot-response-container{
    display: flex;
    align-items: center;
    justify-content: center;
}


.all_view_container{
    display: none;
    /* display: block; */
    position: fixed;
    z-index: 300;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #f2f2f2;
}

.all_view_container_heading{
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 60px;
}

.preview_txt{
    padding-left: 20px;
    font-weight: 300;
    font-size: 17px;
    letter-spacing: 0.4px;
}

#preview_viewer{
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 60px;
    left: 0;
    width: 100%;
    height: calc( 100% - 60px );
}

.preview_art_image{
    display: block;
    width: 90%;
    max-width: 600px;
}



.art_g_button_purchase, .art_g_button_previe, .art_curtor_btn, .art_curtor_btn{
    padding: 10px;
    width: 100%;
    font-size: 13px;
    text-transform: uppercase;
    font-weight: 500;
    margin: 14px auto;
    margin-top: 0;
    background-color: #2196f3;
    color: white;
    border: none;
    border-radius: 3px;
    transition: all 0.2s;
    box-shadow: 0 1px 1px 0 rgba(42, 46, 69, 0.32);
    margin: 0 5px;
    margin-bottom: 10px;
}

.art_curator_button_keeper{
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 20px;
}
.art_curtor_btn, .art_g_button_preview{
    padding: 10px;
    width: 100%;
    font-size: 13px;
    text-transform: uppercase;
    font-weight: 500;
    margin: 14px auto;
    margin-top: 0;
    background-color: #2196f3;
    color: white;
    border: none;
    border-radius: 3px;
    transition: all 0.2s;
    box-shadow: 0 1px 1px 0 rgba(42, 46, 69, 0.32);
    margin: 0 5px;
    margin-bottom: 10px;
}

.art_curtor_btn{
    text-align: center;
}

.art_g_button_purchase:hover, .art_g_button_preview:hover, .art_curtor_btn:hover, .art_curtor_btn:hover{
    background-color: #1565c0;
    box-shadow: 0px 6px 10px 0 rgba(42, 46, 69, 0.32);
}

.art_g_button_preview{
    background-color: #f0f0f0;
    color: #000;
}

.art_g_button_preview:hover{
    background-color: #e7e7e7;
}



.menu_mobile_button, .all_view_container_close_btn {
    display: none;
    background-color: #f4f4f4;
    width: 40px;
    height: 40px;
    margin-left: 20px;
    margin-right: 20px;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-size: 21px;
    overflow: hidden;
    border: 1px solid #ececec;
    box-shadow: 1px 1px 4px 0 #d5d5d5;
    transition: box-shadow 0.3s;
    color: #424450;
    
}

.all_view_container_close_btn{
    display: flex;
}

.menu_mobile_button:hover, .all_view_container_close_btn:hover{
    box-shadow: 2px 2px 9px 0 #c9c9c9;
}


    </style>
</head>
<body>
 <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <img src="logo.png" alt="Cyberthemis Logo" class="logo">
            <span class="sidebar-title">Cyberthemis</span>
            <button id="toggle-btn" class="toggle-btn">☰</button>
        </div>
        <ul class="sidebar-nav">
            <li><a href="index"><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span></a></li>
            <li><a href="#"><i class="fas fa-file-alt"></i> <span>Pages</span></a></li>
            <li><a href="media"><i class="fas fa-image"></i> <span>Media</span></a></li>
            <li><a href="#"><i class="fas fa-folder"></i> <span>Projects</span></a></li>
            <li><a href="#"><i class="fas fa-chart-line"></i> <span>Analytics</span></a></li>
            <li><a href="#"><i class="fas fa-envelope"></i> <span>Inbox</span></a></li>
        </ul>
        <ul class="sidebar-footer">
            <li><a href="#"><i class="fas fa-user"></i> <span>Profile</span></a></li>
            <li><a href="#"><i class="fas fa-cog"></i> <span>Settings</span></a></li>
            <li><a href="#"><i class="fas fa-sign-out-alt"></i> <span>Logout</span></a></li>
        </ul>
    </div>
    <div class="container">
        <header>
            <img src="logo.png" alt="Cyberthemis Logo" class="logo">
            <h1>Introducing CyberThemis</h1>
        </header>

        <div class="main-content">
            <h2>Get started with the most advanced compliance intelligence</h2>
			<div class="chat-log" id="chatLog">
                <!-- Chat messages will be displayed here -->
            </div>
            <div id="chat_suggestions_questions">
            </div>
            <div class="chat-box">
                <input type="text" id="userInput" placeholder="Start a new chat....." autocomplete="">
                <select>
                    <option>EU AI ACT</option>
					<option>GDPR</option>
					
                    <!-- Add more options if needed -->
                </select>
                <button onclick="sendMessage()">→</button>
            </div>


            <p
    
        </div>

    </div>

    <div class="right-panel">
        <div class="section">
            <h3>Saved Chats</h3>
            <a href="#">No saved chats</a>
        </div>
        <div class="section">
            <h3>History</h3>
            <a href="#">No history available</a>
        </div>
    </div>

    <div id="preview_container" class="all_view_container" style="display: none;">
        <div class="all_view_container_heading">
            <p class="preview_txt">Preview</p>
            <a class="all_view_container_close_btn" onclick="close_preview()"><i class="fa fa-remove"></i></a>
        </div>
        <div id="preview_viewer" class="pdfobject-container"><iframe class="pdfobject" title="Embedded PDF" src="TA-9-2024-0138_EN.pdf" allow="fullscreen" style="border: none; width: 100%; height: 100%;"></iframe></div>
    </div>


    <script src="https://unpkg.com/pdfobject"></script>
    <script>
        

    let keyFoundText;
    const preview_container = document.getElementById("preview_container");
    const preview_viewer = document.getElementById("preview_viewer");
    function close_preview(){
        preview_container.style.display = "none";
    }

    // PDF Viewer - PDFObject
    function view_pdf(pdf_link){
        preview_container.style.display = "block";
        PDFObject.embed(pdf_link, "#preview_viewer");
    }
    </script>

    <script>

        

        /* Questions, Answers and PDFS */
        const responses = {
            "what is the eu ai act?": {
                text: `The EU AI Act is a proposed European law on artificial intelligence to ensure safe and trustworthy AI.`,
                source: [
                    { title: "ACT 1", pdf: "TA-9-2024-0138_EN.pdf" },
                    { title: "Article 34", pdf: "TA-9-2024-0138_EN.pdf" }
                ],
            },
            "what are the risk levels in eu ai act?": {
                text: `"What are the risk levels in eu ai act?": "The EU AI Act classifies AI systems into four categories: Unacceptable Risk, High Risk, Limited Risk, and Minimal Risk.`,
                source: [
                    { title: "Meem Hossain Publicaton", pdf: "TA-9-2024-0138_EN.pdf" },
                    { title: "Constitution IV", pdf: "TA-9-2024-0138_EN.pdf" }
                ],
            },
            "what is high-risk ai?": {
                text: `High-risk AI systems include applications in critical infrastructure, education, employment, and law enforcement.`,
                source: [
                    { title: "Meem Hossain Publicaton", pdf: "TA-9-2024-0138_EN.pdf" },
                    { title: "Constitution IV", pdf: "TA-9-2024-0138_EN.pdf" }
                ],
            },
            "how to comply with eu ai act?": {
                text: "To comply with the EU AI Act, organizations must ensure transparency, safety, and non-discrimination in their AI systems.",
                source: [
                    { title: "Meem Hossain Publicaton", pdf: "TA-9-2024-0138_EN.pdf" },
                    { title: "Constitution IV", pdf: "TA-9-2024-0138_EN.pdf" }
                ],
            },
            "what is cyberthemis?": {
                text: "CyberThemis is a compliance intelligence tool designed to assist with regulatory frameworks such as the EU AI Act.",
                source: [
                    { title: "Meem Hossain Publicaton", pdf: "TA-9-2024-0138_EN.pdf" },
                    { title: "Constitution IV", pdf: "TA-9-2024-0138_EN.pdf" }
                ],
            },
        };


        const all_key_array = Object.keys(responses);
       


function searchMessageUsingSuggestion(userInput){
    sendMessage(userInput);
};
        
function sendMessage(userInput) {
    const openMedia = "open media";
    if(openMedia == userInput.toLowerCase()){
        window.location.href("media.html");
    }
    // console.log(userInput);
    if(userInput != undefined) userInput = userInput;
    else userInput = document.getElementById('userInput').value.trim().toLowerCase();
        
        const chatLog = document.getElementById('chatLog');

        if (userInput === '') {
            alert('Please enter a message');
            return;
        }

        // Display user's message
        const userMessage = document.createElement('p');
        // userMessage.innerHTML = `<strong>You:</strong> ${userInput}`;
        // chatLog.appendChild(userMessage);

        // Predefined responses based on specific questions
        let botResponse = "I didn't understand your question.";





        // // Check for exact matches in predefined responses
        // if (responses[userInput]) {
        //     botResponse = respons

        

       // Search term to match
        const searchTerm = userInput;

        // Iterate through the keys of the responses object
        for (let key in responses) {
            if (key.toLowerCase().includes(searchTerm)) {
                const userMessageFound = document.createElement('p');
                userMessageFound.innerHTML = `<b>You:</b> <span class="all_viewed_keys">${key}</span>`;
                chatLog.appendChild(userMessageFound);
                // console.log(`First match found: Key: "${key}", Response: "${responses[key]}"`);
                botResponse = responses[key].text;

                keyFoundText = key;
                // console.log(responses[keyFoundText]["source"][0].text);
                break; // Exit the loop after finding the first match
            }
        }

        setTimeout(() => {
            const botMessageContainer = document.createElement('div');
            botMessageContainer.classList.add('bot-response-container');

            
            const botMessageContainerLeft = document.createElement('div');
            botMessageContainerLeft.classList.add('bot-response-container-left');
            const botMessageContainerRight = document.createElement('div');
            botMessageContainerRight.classList.add('bot-response-container-right');

            // Create the logo element
            const botLogo = document.createElement('img');
            botLogo.src = 'logo.png'; // Replace with the actual logo path
            botLogo.alt = 'CyberThemis Logo';
            botLogo.classList.add('bot-logo');

            // Create the bot message element
            const botMessage = document.createElement('div');
            botMessage.classList.add('bot-message');
            botMessage.innerHTML = botResponse; // Use innerHTML to handle paragraphs and HTML content

            // Append the logo and message to the container
            botMessageContainerLeft.appendChild(botLogo);
            botMessageContainerLeft.appendChild(botMessage);

            // Toggle source button (placed directly under the bot message)
            const toggleSourceBtn = document.createElement('button');
            toggleSourceBtn.classList.add('toggle-source-btn');
            toggleSourceBtn.textContent = 'Show Sources';
            botMessageContainerRight.appendChild(toggleSourceBtn);

            // Source container
            const sourceContainer = document.createElement('div');
            sourceContainer.classList.add('source-container');

            let pdfArray = responses[keyFoundText].source;
            

            pdfShowHTML='';
            pdfArray.forEach((item) => {
                pdfShowHTML += `<li><a href="#" onclick="view_pdf('${item.pdf}')">${item.title}</a></li>`;
            });
            sourceContainer.innerHTML = `<ul>${pdfShowHTML}</ul>`;
            sourceContainer.style.display = 'none'; // Initially hidden
            botMessageContainerRight.appendChild(sourceContainer);


            botMessageContainer.appendChild(botMessageContainerLeft);
            if(userInput!=""){
                botMessageContainer.appendChild(botMessageContainerRight);
            }

            toggleSourceBtn.onclick = function() {
                sourceContainer.style.display = sourceContainer.style.display === 'none' ? 'block' : 'none';
                this.textContent = sourceContainer.style.display === 'none' ? 'Show Sources' : 'Hide Sources';
            };

            // Append the entire container to the chat log
            chatLog.appendChild(botMessageContainer);

            // Scroll to the bottom of the chat log
            chatLog.scrollTop = chatLog.scrollHeight;
        }, 1000);


        // Clear input field
        document.getElementById('userInput').value = '';


        
        
        const chat_suggestions_questions = document.getElementById("chat_suggestions_questions");
        // console.log(all_key_array);
        const all_viewed_keys = document.getElementsByClassName("all_viewed_keys");
       // Convert the HTMLCollection to an array
        const viewed_keys_array = Array.from(all_viewed_keys).map(element => element.textContent.trim());

        // Filter the all_key_array to remove keys that are in the viewed_keys_array
        const final_key_array = all_key_array.filter(key => !viewed_keys_array.includes(key));

        // Output the final array
        // console.log(final_key_array);


        chat_suggestions_questions.innerHTML = "";
        for(x = 0; x < final_key_array.length; x++){
            chat_suggestions_questions.innerHTML += `<a style="color: blue;" onclick="searchMessageUsingSuggestion('${final_key_array[x]}')">${final_key_array[x]}</a>, `;
        }
    }

    // Toggle sidebar collapse
    document.getElementById('toggle-btn').addEventListener('click', function () {
        document.getElementById('sidebar').classList.toggle('collapsed');
    });

     // Add event listener for "Enter" key
     document.getElementById('userInput').addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            sendMessage(); // Execute sendMessage function when Enter is pressed
        }
    });
</script>


</body>
</html>